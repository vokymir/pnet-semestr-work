@page "/"
@inject Blazored.LocalStorage.ILocalStorageService LocalStorage
@inject NavigationManager Nav
@inject BirdApiClient BAC

<PageTitle>V√≠tej</PageTitle>

@if (UserDto is not null)
{
    <div class="text-center mt-5">
        <h1 class="mb-4">V√≠tej, @UserDto.DisplayName! üê¶</h1>

        <p class="lead">Vid√≠≈° pt√°ƒçka? Rychle ho bƒõ≈æ zaznamenat!</p>

        <button class="btn btn-lg btn-success mt-3" @onclick="GoToNewRecord">
            ‚ûï P≈ôidat nov√Ω z√°znam
        </button>
    </div>
}
else
{
    <div class="mt-5 text-center">
        <h1 class="mb-4">V√≠tej v pt√°ƒçkov√© aplikaci! üê¶</h1>
        <p>Pro pou≈æ√≠v√°n√≠ aplikace se pros√≠m p≈ôihlas.</p>
    </div>
}

@code {
    private UserDto? UserDto = null;

    protected override async Task OnInitializedAsync()
    {
        UserDto = await LocalStorage.GetItemAsync<UserDto>("userDto");
    }

    private void GoToNewRecord()
    {
        Nav.NavigateTo("/zaznam/novy");
    }
}

@page "/"
@inject Blazored.LocalStorage.ILocalStorageService LocalStorage
@inject NavigationManager Nav
@inject BirdApiClient BAC

<PageTitle>VÃ­tej</PageTitle>

@if (UserDto is not null)
{
    <div class="text-center mt-5">
        <h1 class="mb-4">VÃ­tej, @UserDto.DisplayName! ğŸ¦</h1>

        <p class="lead">VidÃ­Å¡ ptÃ¡Äka? Rychle ho bÄ›Å¾ zaznamenat!</p>

        <button class="btn btn-lg btn-success mt-3" @onclick="GoToNewRecord">
            â• PÅ™idat novÃ½ zÃ¡znam
        </button>

        <div class="mt-5">
            <details>
                <summary class="text-muted">ğŸ›ˆ Jak aplikaci pouÅ¾Ã­vat</summary>
                <div class="mt-3 text-start mx-auto" style="max-width: 600px;">
                  <p><strong>ZÃ¡znamy:</strong> V menu "ZÃ¡znamy" mÅ¯Å¾ete pÅ™idÃ¡vat, upravovat a prohlÃ­Å¾et svÃ© zÃ¡znamy pozorovÃ¡nÃ­
                                           ptÃ¡kÅ¯.</p>
                    <p><strong>PtÃ¡ÄkaÅ™i:</strong> KaÅ¾dÃ½ zÃ¡znam je pÅ™iÅ™azen k ptÃ¡ÄkaÅ™i. MÅ¯Å¾ete si vytvoÅ™it vÃ­ce ptÃ¡ÄkaÅ™Å¯ (napÅ™. pro kaÅ¾dÃ©ho
                        Älena rodiny).</p>
                    <p><strong>UdÃ¡losti:</strong> Jsou soutÄ›Å¾e nebo pozorovacÃ­ akce. Pokud jste sprÃ¡vce, mÅ¯Å¾ete oznaÄovat zÃ¡znamy
                        jako platnÃ©.</p>
                      <p><strong>NastavenÃ­:</strong> ZmÄ›Åˆte si jmÃ©no, e-mail nebo Äas automatickÃ©ho odhlÃ¡Å¡enÃ­.</p>
                    <p class="text-muted">DÄ›kujeme, Å¾e pÅ™ispÃ­vÃ¡te do databÃ¡ze pozorovÃ¡nÃ­!</p>
                </div>
            </details>
        </div>
    </div>
}
else
{
    <div class="mt-5 text-center">
        <h1 class="mb-4">VÃ­tej v ptÃ¡ÄkovÃ© aplikaci! ğŸ¦</h1>
        <p>Pro pouÅ¾Ã­vÃ¡nÃ­ aplikace se prosÃ­m pÅ™ihlas.</p>
    </div>
}

@code {
    private UserDto? UserDto = null;

    protected override async Task OnInitializedAsync()
    {
        UserDto = await LocalStorage.GetItemAsync<UserDto>("userDto");
    }

    private void GoToNewRecord()
    {
        Nav.NavigateTo("/zaznam/novy");
    }
}
